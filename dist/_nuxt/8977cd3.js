(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(t,e,r){"use strict";r(10),r(8),r(7),r(4),r(9);var n=r(2),o=r(34);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={name:"AccessForm",props:["type"],data:function(){return{loading:!1,valid:!0,error:!1,errorString:"",password:"",passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=4||"Password must be at least 4 characters"}],email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}]}},methods:l(l({},Object(o.b)("user",["tryAccess"])),{},{submit:function(){var t=this;if(!this.validate())return!1;this.loading=!0,this.tryAccess({email:this.email,password:this.password,type:this.type}).then((function(){t.$router.push("/app")})).catch((function(e){t.loading=!1,t.error=!0,t.errorString=e}))},validate:function(){return this.$refs.form.validate()},reset:function(){return this.$refs.form.reset()},resetValidation:function(){return this.$refs.form.resetValidation()}})},f=r(31),v=r(67),m=r.n(v),h=r(305),_=r(128),y=r(300),O=r(304),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-text-field",{attrs:{rules:t.emailRules,loading:t.loading,disabled:t.loading,label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),r("v-text-field",{attrs:{rules:t.passwordRules,loading:t.loading,disabled:t.loading,label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),r("v-alert",{attrs:{color:"red",dismissible:"",type:"error"},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v(t._s(t.errorString))]),t._v(" "),r("v-btn",{staticClass:"mr-4",attrs:{disabled:t.loading||!t.valid,color:"success",loading:t.loading,type:"submit"}},[t._v("\n    "+t._s(t.type)+"\n  ")]),t._v(" "),r("v-btn",{attrs:{color:"gray"},on:{click:function(e){return t.$router.push("/")}}},[t._v("\n    Home\n  ")])],1)}),[],!1,null,null,null);e.a=component.exports;m()(component,{VAlert:h.a,VBtn:_.a,VForm:y.a,VTextField:O.a})},174:function(t,e,r){"use strict";r(10),r(8),r(7),r(4),r(9);var n=r(2),o=r(34),c=r(131),l=r(44);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={name:"Dashboard",layout:"app",components:{AccessForm:c.a,Error:l.a},data:function(){return{ready:!1,status:"Logging in..."}},computed:f({},Object(o.d)("user",["isLoggedIn","user","token"])),methods:f(f(f({},Object(o.b)("user",["tryJWT"])),Object(o.c)("user",["loadUser","setUser","updateUser","forgetUser"])),{},{returnToLogin:function(){this.$router.push("/login")}}),watch:{isLoggedIn:function(t){if(!t)return this.returnToLogin();this.ready=!0}},mounted:function(){var t=this;return this.loadUser(),this.token?this.isLoggedIn?this.ready=!0:void this.tryJWT({url:"user/me"}).then((function(e){if(!e.data.ok)return t.forgetUser(),t.returnToLogin();t.updateUser(e.data.data),t.ready=!0})).catch((function(e){return t.forgetUser(),t.returnToLogin()})):this.returnToLogin()}},m=r(31),h=r(67),_=r.n(h),y=r(301),O=r(126),w=r(127),k=r(83),j=r(46),x=r(70),P=r(302),L=r(303),component=Object(m.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{staticStyle:{background:"rgb(240,240,240)"},attrs:{id:"inspire"}},[t.ready&&t.user?n("div",[n("v-navigation-drawer",{attrs:{app:"",permanent:""}},[n("v-list",{staticClass:"pt-0"},[n("v-list-item",{staticClass:"px-4 py-4",staticStyle:{"text-align":"left"},attrs:{to:"/"}},[n("img",{staticStyle:{width:"auto","max-height":"40px",display:"inline-block"},attrs:{src:r(209)}})]),t._v(" "),n("v-list-item",{attrs:{"exact-active-class":"none",link:"",to:"/app/profile"}},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"title"},[t._v("\n              "+t._s(t.user.email)+"\n            ")]),t._v(" "),n("v-list-item-subtitle",[t._v(t._s(t.user.id))])],1)],1),t._v(" "),n("v-list-item",{attrs:{exact:"",link:"",to:"/app",active:"false"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-view-dashboard")])],1),t._v(" "),n("v-list-item-title",[t._v("Dashboard")])],1),t._v(" "),n("v-list-item",{attrs:{link:"",to:"/app/bots"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-robot")])],1),t._v(" "),n("v-list-item-title",[t._v("Bots")])],1),t._v(" "),n("v-list-item",{attrs:{link:"",to:"/app/communities"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-account-multiple")])],1),t._v(" "),n("v-list-item-title",[t._v("Communities")])],1),t._v(" "),n("v-list-item",{attrs:{link:"",to:"/app/profile"}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-account")])],1),t._v(" "),n("v-list-item-title",[t._v("Profile")])],1)],1)],1),t._v(" "),n("v-main",[n("nuxt",{staticClass:"px-8 py-4"})],1)],1):n("div",[t._v("\n    "+t._s(t.status)+"\n  ")])])}),[],!1,null,null,null);e.a=component.exports;_()(component,{VApp:y.a,VIcon:O.a,VList:w.a,VListItem:k.a,VListItemContent:j.a,VListItemIcon:x.a,VListItemSubtitle:j.b,VListItemTitle:j.c,VMain:P.a,VNavigationDrawer:L.a})},175:function(t,e,r){"use strict";var n=r(31),o=r(67),c=r.n(o),l=r(301),d=r(302),component=Object(n.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",{attrs:{id:"landing"}},[e("v-main",[e("nuxt")],1)],1)}),[],!1,null,null,null);e.a=component.exports;c()(component,{VApp:l.a,VMain:d.a})},178:function(t,e,r){t.exports=r(179)},209:function(t,e,r){t.exports=r.p+"img/logo.681c0b2.svg"},273:function(t,e,r){"use strict";r.r(e),r.d(e,"tryAccess",(function(){return n})),r.d(e,"tryJWT",(function(){return o}));r(4);function n(t,e){var r=this;return new Promise((function(n,o){r.$axios.post("".concat(t.state.baseURL,"/user/").concat(e.type),e).then((function(e){return e.data?e.data.ok?(t.commit("setUser",e.data),void n(e)):o(e.data.error):o("No data returned")})).catch((function(t){o(t)}))}))}function o(t,e){var r=this;return new Promise((function(n,o){if(!t.state.token)return o("No token stored");var c={headers:{Authorization:"Bearer: ".concat(t.state.token)}};r.$axios[e.data?e.method||"post":"get"]("".concat(t.state.baseURL,"/").concat(e.url),e.data?e.data:c,c).then((function(t){return t.data?t.data.ok?void n(t):o(t.data.error):o("No data returned")})).catch((function(t){o(t)}))}))}},274:function(t,e){},275:function(t,e,r){"use strict";r.r(e),r.d(e,"setUser",(function(){return n})),r.d(e,"updateUser",(function(){return o})),r.d(e,"addBot",(function(){return c})),r.d(e,"forgetUser",(function(){return l})),r.d(e,"loadUser",(function(){return d}));function n(t,e){localStorage.setItem("profit_user",JSON.stringify(e.user)),localStorage.setItem("profit_token",e.token),t.user=e.user,t.token=e.token,t.isLoggedIn=!0}function o(t,e){t.user=e,localStorage.setItem("profit_user",JSON.stringify(e))}function c(t,e){if(t.user.bots.indexOf(e)>-1)return!1;t.user.bots.push(e)}function l(t){t.user=null,t.token=null,t.isLoggedIn=!1,localStorage.removeItem("profit_token"),localStorage.removeItem("profit_user")}function d(t){var e=localStorage.getItem("profit_token"),r=localStorage.getItem("profit_user");if(!e||"{"!==r.charAt(0))return!1;t.user=JSON.parse(r),t.token=e}},276:function(t,e,r){"use strict";r.r(e),function(t){e.default=function(){return{baseURL:t.env.API_URL||"http://localhost:8000",isLoggedIn:!1,user:null,token:null}}}.call(this,r(123))},44:function(t,e,r){"use strict";var n={props:["error","message"],layout:"landing"},o=r(31),component=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[404===this.error.statusCode?e("h1",[this._v("Page not found")]):e("h1",[this._v(this._s(this.message||"An error occurred"))]),this._v(" "),e("nuxt-link",{attrs:{to:"/"}},[this._v("Phone home")])],1)}),[],!1,null,null,null);e.a=component.exports}},[[178,9,1,10]]]);