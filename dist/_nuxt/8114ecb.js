(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{311:function(t,e,o){var content=o(321);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(13).default)("191afde2",content,!0,{sourceMap:!1})},320:function(t,e,o){"use strict";var n=o(311);o.n(n).a},321:function(t,e,o){(e=o(12)(!1)).push([t.i,"a[data-v-0aebdeaa]{color:inherit;text-decoration:none}[dense] p[data-v-0aebdeaa]{margin-top:.5em;margin-bottom:.5rem}.v-input[data-v-0aebdeaa]{margin-top:0}",""]),t.exports=e},338:function(t,e,o){"use strict";o.r(e);o(10),o(8),o(6),o(4),o(9),o(46);var n=o(2),r=o(35),d=o(34);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={name:"AddBotForm",props:["type"],data:function(){return{loading:!1,valid:!0,error:!1,errorString:"",token:"",tokenRules:[function(t){return!!t||"Token is required"}]}},methods:c(c({},Object(d.b)("user",["addToSet"])),{},{submit:function(){var t=this;if(!this.$refs.form.validate())return!1;this.loading=!0,r.a.user({path:"bot",method:"put",data:{token:this.token}}).then((function(e){if(t.loading=!1,!e.data.ok)return t.error=!0,t.errorString=e.data.error;t.addToSet({key:bots,data:e.data.bot_id}),t.$refs.form.reset()})).catch((function(e){t.loading=!1,t.error=!0,t.errorString=e}))}})},f=o(26),h=o(51),_=o.n(h),m=o(309),y=o(132),O=o(304),k=o(308),component=Object(f.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-text-field",{attrs:{rules:t.tokenRules,loading:t.loading,disabled:t.loading,label:"Token from @Botfather",required:""},model:{value:t.token,callback:function(e){t.token=e},expression:"token"}}),t._v(" "),o("v-alert",{attrs:{color:"red",dismissible:"",type:"error"},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v(t._s(t.errorString))]),t._v(" "),o("v-btn",{staticClass:"mr-4",attrs:{disabled:t.loading||!t.valid,color:"success",loading:t.loading,type:"submit"}},[t._v("\n    Continue\n  ")])],1)}),[],!1,null,null,null),j=component.exports;_()(component,{VAlert:m.a,VBtn:y.a,VForm:O.a,VTextField:k.a});var x=o(22),D=(o(317),o(48)),V={data:function(){return{bot:null,ready:!1,extras:{},errorFor:{bot:null},loading:{active:!1}}},props:["botID"],mounted:function(){return D.a.boot(),this.botID?(this.bot=D.a.load("bot",this.botID,5),this.bot?(this.fetchAdditional(),this.ready=!0):void this.fetchBot(this.botID)):this.errorFor.bot="No bot ID specified"},methods:{selectBot:function(t){this.$router.push("/app/bots/#"+t),this.$emit("detail",t)},getModuleOptions:function(t){this.bot.modules=this.bot.modules||{},this.bot.modules[t.id]=this.bot.modules[t.id]||{};for(var i=0;i<t.options.length;i++)this.bot.modules[t.id][t.options[i].id]=this.getOptionValue(t,t.options[i]);return t.options},getOptionValue:function(t,option){return void 0===this.bot.modules||void 0===this.bot.modules[t.id]||void 0===this.bot.modules[t.id][option.id]?option.default:this.bot.modules[t.id][option.id]},save:function(t){D.a.save("bot",t,this.bot)},fetchBot:function(t){var e=this;this.ready=!1,r.a.bot({botID:t,method:"get"}).then((function(o){D.a.save("bot",t,o),e.bot=o,e.bot.modules||(e.bot.modules={}),e.ready=!0,e.fetchAdditional()})).catch((function(t){e.errorFor.bot=t}))},setLazy:function(t,e){D.a.save("lazy",t,e),this.extras[t]=e,this.loading[t]=!1},fetchLazy:function(t){var e=this,o=t.pop();if(!o)return!1;var n=D.a.load("lazy",o,0);if(n)return this.setLazy(o,n),this.fetchLazy(t);r.a.basic({method:"get",path:o}).then((function(t){e.setLazy(o,t)})).catch((function(t){console.log(t)})).finally((function(){e.fetchLazy(t)}))},fetchAdditional:function(){for(var t=[],e=0,o=Object.entries(this.loading);e<o.length;e++){var n=Object(x.a)(o[e],2),r=n[0];n[1]&&t.push(r)}t.length&&this.fetchLazy(t)},setModule:function(t,data){var e=this;this.loading=Object.assign({},this.loading,Object(n.a)({},"module_"+t.id,!0)),r.a.bot({botID:this.botID,path:t.id,method:"patch",data:{data:data}}).then((function(o){e.bot.modules=e.bot.modules||{};for(var n=0,r=Object.entries(o);n<r.length;n++){var d=Object(x.a)(r[n],2),l=d[0],c=d[1];e.$set(e.bot.modules[t.id],l,c)}e.save(e.botID)})).catch((function(t){console.log(t,"some error")})).finally((function(){e.loading["module_"+t.id]=!1}))},setActivation:function(){var t=this;this.loading.active=!0,r.a.bot({botID:this.botID,path:"",method:"patch",data:{data:{active:!this.bot.active}}}).then((function(e){void 0!==e.active&&(t.bot.active=e.active,t.save(t.botID))})).catch((function(t){console.log(t)})).finally((function(){t.loading.active=!1}))}}},w={name:"BotListItem",mixins:[V]},C=o(314),B=o(310),I=Object(f.a)(w,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",{staticClass:"mb-4",attrs:{color:"secondary",dark:""}},[o("div",{staticClass:"d-flex flex-no-wrap justify-space-between"},[t.ready?o("div",[o("v-card-title",[t._v(t._s(t.bot.t_info.first_name))]),t._v(" "),o("v-card-subtitle",[t._v("@"+t._s(t.bot.t_info.username))]),t._v(" "),o("v-card-text",[t._v(t._s(t.bot.active?"This bot is active.":"This bot is not active."))]),t._v(" "),o("v-card-actions",[o("v-btn",{attrs:{loading:t.loading.active,disabled:t.loading.active},on:{click:function(e){return t.setActivation(!t.bot.active)}}},[t._v("\n          "+t._s(t.bot.active?"De-activate":"Activate")+"\n        ")]),t._v(" "),o("v-btn",{attrs:{link:""},on:{click:function(e){return t.selectBot(t.botID)}}},[t._v("\n          Settings\n        ")])],1)],1):o("div",[o("v-card-title",[t._v("Loading...")]),t._v(" "),o("v-card-subtitle",[t._v("Loading...")]),t._v(" "),o("v-card-text",[t._v("Loading...")]),t._v(" "),o("v-card-actions",[t._v("Loading...")])],1)])])}),[],!1,null,null,null),L=I.exports;_()(I,{VBtn:y.a,VCard:C.a,VCardActions:B.a,VCardSubtitle:B.b,VCardText:B.c,VCardTitle:B.d});var P={name:"BotDetails",mixins:[V],data:function(){return{loading:{modules:!0}}}},A=(o(320),o(345)),T=o(335),S=o(130),$=Object(f.a)(P,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.ready&&t.bot?o("div",[t.bot.t_info?o("v-card",{staticClass:"mb-4"},[o("v-card-title",[t._v("\n        "+t._s(t.bot.t_info.first_name)+"\n      ")]),t._v(" "),o("v-card-subtitle",[o("a",{attrs:{href:"https://t.me/"+t.bot.t_info.username,target:"_blank"}},[t._v("\n          @"+t._s(t.bot.t_info.username)+"\n        ")])]),t._v(" "),o("v-card-text",{attrs:{dense:""}},[o("p",[t._v("\n          "+t._s(t.bot.active?"This bot is active":"This bot is inactive")+".\n        ")]),t._v(" "),o("p",[t._v("\n          "+t._s(t.bot.t_info.can_join_groups?"Can":"Can not")+" be ordered to join groups.\n        ")]),t._v(" "),o("p",[t._v("\n          "+t._s(t.bot.t_info.can_read_all_group_messages?"Can read all group messages":"Can not read all group messages unless elevated to admin")+".\n        ")]),t._v(" "),o("p",[t._v("\n          "+t._s(t.bot.t_info.supports_inline_queries?"Can read inline queries":"Can not read inline queries. Talk to @botfather to resolve if required")+".\n        ")])]),t._v(" "),o("v-card-actions",[o("v-btn",{attrs:{dark:!t.bot.active&&!t.loading.active,disabled:t.loading.active,loading:t.loading.active},on:{click:function(e){return t.setActivation(!t.bot.active)}}},[t._v("\n          "+t._s(t.bot.active?"De-activate":"Activate")+"\n        ")])],1)],1):t._e(),t._v(" "),t.loading.modules?o("v-card",{attrs:{loading:"",disabled:""}},[o("v-card-title",[t._v("Modules")]),t._v(" "),o("v-card-text",[t._v("Loading...")])],1):o("div",t._l(t.extras.modules,(function(e){return o("v-card",{key:e.id,attrs:{loading:t.loading["module_"+e.id],disabled:t.loading["module_"+e.id]}},[o("v-card-title",[t._v(t._s(e.name))]),t._v(" "),o("v-card-subtitle",[o("div",[t._v(t._s(e.description))]),t._v(" "),e.slots?o("div",t._l(e.slots,(function(slot){return o("v-chip",{key:"module_"+e.id+"_slot_"+slot,staticClass:"mr-2",attrs:{color:"grey",label:"","text-color":"white"}},[o("v-icon",{attrs:{left:""}},"group"==slot?[t._v("\n                mdi-account-multiple\n              ")]:"private"==slot?[t._v("\n                mdi-account\n              ")]:"channel"==slot?[t._v("\n                mdi-bullhorn\n              ")]:"inline"==slot?[t._v("\n                mdi-text-short\n              ")]:"callback"==slot?[t._v("\n                mdi-gesture-tap-button\n              ")]:[t._v("\n                mdi-help\n              ")]),t._v("\n              "+t._s(slot)+"\n            ")],1)})),1):t._e()]),t._v(" "),o("div",[o("v-card-text",t._l(t.getModuleOptions(e),(function(option){return o("div",{key:e.id+"_"+option.id},["Boolean"==option.type?o("div",[o("v-checkbox",{attrs:{dense:"",label:option.name},on:{change:function(o){var n;return t.setModule(e,((n={})[option.id]=t.bot.modules[e.id][option.id],n))}},model:{value:t.bot.modules[e.id][option.id],callback:function(o){t.$set(t.bot.modules[e.id],option.id,o)},expression:"bot.modules[module.id][option.id]"}})],1):o("div",[t._v("\n                "+t._s(option.name)+": "+t._s(t.getOptionValue(e,option))+"\n              ")])])})),0),t._v(" "),o("v-card-actions",[o("v-btn",{attrs:{dark:!t.getOptionValue(e,{id:"active",default:!1})},on:{click:function(o){t.setModule(e,{active:!t.getOptionValue(e,{id:"active",default:!1})})}}},[t._v("\n              "+t._s(t.getOptionValue(e,{id:"active",default:!1})?"Disable":"Enable")+"\n            ")])],1)],1)],1)})),1)],1):o("v-card",[t._v("\n    Loading...\n  ")]),t._v(" "),o("v-btn",{staticClass:"mt-4",attrs:{dark:"",link:"",to:"/app/bots"}},[t._v("\n    Back to bots list\n  ")])],1)}),[],!1,null,"0aebdeaa",null),z=$.exports;function E(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function F(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}_()($,{VBtn:y.a,VCard:C.a,VCardActions:B.a,VCardSubtitle:B.b,VCardText:B.c,VCardTitle:B.d,VCheckbox:A.a,VChip:T.a,VIcon:S.a});var M={name:"DashBots",layout:"app",data:function(){return{detailBot:null}},components:{AddBotForm:j,BotListItem:L,BotDetails:z},computed:F(F({},Object(d.c)("user",["user"])),{},{view:function(){return this.$route.hash?(this.detailBot=this.$route.hash.replace("#",""),"detail"):"list"}})},R=o(336),J=o(346),N=o(337),G=Object(f.a)(M,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return"list"==t.view?o("div",[o("v-container",[o("v-row",{attrs:{dense:""}},[o("v-col",{attrs:{cols:"12"}},t._l(t.user.bots,(function(t){return o("BotListItem",{key:t,attrs:{botID:t}})})),1)],1),t._v(" "),o("v-row",{attrs:{dense:""}},[o("v-col",[o("h2",[t._v("Add bot")]),t._v(" "),o("AddBotForm")],1)],1)],1)],1):o("div",[o("v-container",[o("v-row",{attrs:{dense:""}},[o("v-col",{attrs:{cols:"12"}},[o("BotDetails",{key:"detail_"+t.detailBot,attrs:{botID:t.detailBot}})],1)],1)],1)],1)}),[],!1,null,null,null);e.default=G.exports;_()(G,{VCol:R.a,VContainer:J.a,VRow:N.a})}}]);